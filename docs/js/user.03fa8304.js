"use strict";(self["webpackChunksummary"]=self["webpackChunksummary"]||[]).push([[378,792,83,244],{8083:function(e,r,a){a.r(r),a.d(r,{default:function(){return V}});a(1703);var s=a(3396),t=a(7139),l=a(4870),n=a(9242),o=a(678),u=a(7178),d=a(6666),p=a(2498);function m(e){let r=0;if(!e)return r;const a={};for(let l=0;l<e.length;l++)a[e[l]]=(a[e[l]]||0)+1,r+=5/a[e[l]];const s={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),nonWords:/\W/.test(e)};let t=0;for(const l in s)t+=!0===s[l]?1:0;return r+=10*(t-1),r}const i=e=>((0,s.dD)("data-v-8c8e1dec"),e=e(),(0,s.Cn)(),e),c={class:"container"},g={class:"login-form"},w=i((()=>(0,s._)("h1",null,"用户注册",-1))),f=(0,s.Uk)(" 强度："),v=i((()=>(0,s._)("div",{style:{"margin-top":"10px"}},[(0,s._)("span",null,"请至少输入 8 个字符。请不要使用容易被猜到的密码。")],-1))),h=(0,s.Uk)("注册"),_={class:"register"},b=(0,s.Uk)("使用已有账户登录");var W=(0,s.aZ)({__name:"Register",setup(e){(0,s.aZ)({name:"RegisterView"});const r=(0,o.tv)(),a=(0,l.iH)(),i=["最低","低","中","强"],W=["error","error","warning","success"],y=["#ff0000","#ff0000","#ff7e05","#52c41a"],k=(0,l.qj)({username:"",password:"",password2:"",phone:"",captcha:""}),V=(0,l.qj)({passwordLevelChecked:!1,passwordLevel:0,percent:10,time:60,smsSendBtn:!1}),U=(0,l.iH)(!1),C=(0,s.Fl)((()=>W[V.passwordLevel])),L=(0,s.Fl)((()=>i[V.passwordLevel])),x=(0,s.Fl)((()=>y[V.passwordLevel])),S=(e,r,a)=>{if(""===r)return a();r.length>=6?(m(r)>=30&&(V.passwordLevel=1),m(r)>=60&&(V.passwordLevel=2),m(r)>=80&&(V.passwordLevel=3)):(V.passwordLevel=0,a(new Error("密码强度不够"))),V.percent=33*V.passwordLevel,a()},q=(e,r,a)=>{""===r?a(new Error("请确认登录密码")):r!==k.password?a(new Error("两次输入的密码不一致")):a()},R=(e,r,a)=>{a()},B=e=>{e&&e.validate((e=>{e&&(U.value=!0,r.push({name:"RegisterResult",params:{...k}}))}))},Z=(0,l.qj)({username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:16,message:"密码长度限制在6到16个字符",trigger:"blur"},{validator:S,trigger:"change"}],password2:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:16,message:"密码长度限制在6到16个字符",trigger:"blur"},{validator:q,trigger:"blur"}],phone:[{required:!0,pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"},{validator:R,trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),j=async(e,r)=>{e.preventDefault(),r&&r.validateField("phone",(e=>{if(e){V.smsSendBtn=!0;const e=window.setInterval((()=>{V.time--<=0&&(V.time=60,V.smsSendBtn=!1,window.clearInterval(e))}),1e3);(0,p.EK)({phone:k.phone}).then((e=>{(0,u.z8)({message:"验证码发送中..",type:"success"}),(0,d.bM)({title:"成功",message:"验证码获取成功，您的验证码为："+e.data.result.captcha,type:"success"})})).catch((r=>{clearInterval(e),V.time=60,V.smsSendBtn=!1,z(r)}))}}))},z=e=>{(0,d.bM)({title:"错误",message:((e.response||{}).data||{}).message||"请求出现错误，请稍后再试",type:"error"}),U.value=!1},D=()=>{r.push({name:"Login"})};return(e,r)=>{const o=(0,s.up)("el-input"),u=(0,s.up)("el-form-item"),d=(0,s.up)("el-progress"),p=(0,s.up)("el-popover"),m=(0,s.up)("el-col"),i=(0,s.up)("el-button"),W=(0,s.up)("el-row"),y=(0,s.up)("el-form"),S=(0,s.up)("el-link");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(W,{class:"login"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{xs:24,sm:10,md:10,lg:10,xl:10,class:"login-left"},{default:(0,s.w5)((()=>[(0,s._)("div",g,[w,(0,s.Wm)(y,{ref_key:"registerRef",ref:a,model:k,rules:Z},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{prop:"username"},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{modelValue:k.username,"onUpdate:modelValue":r[0]||(r[0]=e=>k.username=e),placeholder:"请输入用户名",autocomplete:"false"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(p,{placement:"right-start",trigger:"click",width:240},{reference:(0,s.w5)((()=>[(0,s.Wm)(u,{prop:"password"},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{modelValue:k.password,"onUpdate:modelValue":r[1]||(r[1]=e=>k.password=e),placeholder:"请输入密码",type:"password",autocomplete:"off","show-password":""},null,8,["modelValue"])])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",{class:(0,t.C_)(["user-register",(0,l.SU)(C)])},[f,(0,s._)("span",null,(0,t.zw)((0,l.SU)(L)),1)],2),(0,s.Wm)(d,{percentage:V.percent,color:(0,l.SU)(x),"show-text":!1,"stroke-width":8},null,8,["percentage","color"]),v])])),_:1}),(0,s.Wm)(u,{prop:"password2"},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{modelValue:k.password2,"onUpdate:modelValue":r[2]||(r[2]=e=>k.password2=e),placeholder:"请确认密码",type:"password",autocomplete:"off","show-password":""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(u,{prop:"phone"},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{modelValue:k.phone,"onUpdate:modelValue":r[3]||(r[3]=e=>k.phone=e),placeholder:"请输入手机号",autocomplete:"false"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(W,{gutter:16},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{span:16},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{prop:"captcha"},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{modelValue:k.captcha,"onUpdate:modelValue":r[4]||(r[4]=e=>k.captcha=e),placeholder:"请输入验证码",autocomplete:"false"},null,8,["modelValue"])])),_:1})])),_:1}),(0,s.Wm)(m,{span:8},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{type:"primary",disabled:V.smsSendBtn,onClick:r[5]||(r[5]=(0,n.iM)((e=>j(e,a.value)),["stop","prevent"])),textContent:(0,t.zw)(V.smsSendBtn?V.time+" s":"获取验证码")},null,8,["disabled","textContent"])])),_:1})])),_:1}),(0,s.Wm)(i,{type:"primary",class:"register-button",loading:U.value,disabled:U.value,onClick:r[6]||(r[6]=(0,n.iM)((e=>B(a.value)),["stop","prevent"]))},{default:(0,s.w5)((()=>[h])),_:1},8,["loading","disabled"])])),_:1},8,["model","rules"]),(0,s._)("div",_,[(0,s.Wm)(S,{type:"primary",underline:!1,onClick:D},{default:(0,s.w5)((()=>[b])),_:1})])])])),_:1}),(0,s.Wm)(m,{span:14,class:"login-right hidden-xs-only"})])),_:1})])}}}),y=a(89);const k=(0,y.Z)(W,[["__scopeId","data-v-8c8e1dec"]]);var V=k},3191:function(e,r,a){a.r(r),a.d(r,{default:function(){return f}});var s=a(3396),t=a(7139),l=a(4870),n=a.p+"img/approved.8d43e580.svg",o=a(678);const u=e=>((0,s.dD)("data-v-2cbc2e46"),e=e(),(0,s.Cn)(),e),d={class:"container"},p=u((()=>(0,s._)("img",{src:n,alt:""},null,-1))),m={class:"content"},i=(0,s.Uk)("返回首页");var c=(0,s.aZ)({__name:"RegisterResult",setup(e){const r=(0,o.yj)(),a=(0,o.tv)(),n=(0,l.qj)({username:""}),u=(0,s.Fl)((()=>{const e=n.username;return`你的账户：${e} 注册成功`}));(0,s.bv)((()=>{n.username=r.params.username}));const c=()=>{a.push({name:"Login"})};return(e,r)=>{const a=(0,s.up)("el-button");return(0,s.wg)(),(0,s.iD)("div",d,[p,(0,s._)("div",m,(0,t.zw)((0,l.SU)(u)),1),(0,s.Wm)(a,{type:"primary",class:"return-button",onClick:c},{default:(0,s.w5)((()=>[i])),_:1})])}}}),g=a(89);const w=(0,g.Z)(c,[["__scopeId","data-v-2cbc2e46"]]);var f=w}}]);
//# sourceMappingURL=user.03fa8304.js.map