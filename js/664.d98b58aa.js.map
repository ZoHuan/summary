{"version":3,"file":"js/664.d98b58aa.js","mappings":"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","sources":["webpack://summary/./src/hooks/web/useSystem.ts","webpack://summary/./node_modules/vue-loader/dist/index.js","webpack://summary/./src/views/system/role/PermissionsModal.vue"],"sourcesContent":["import { ref } from \"vue\";\nimport {\n  getDepartmentList,\n  getRoleList,\n  getMenuList,\n} from \"@/api/system/system\";\nimport type { MenuType } from \"@/types/user\";\n\nexport default function () {\n  // 部门配置\n  const departmentProps = {\n    children: \"children\",\n    label: \"name\",\n    value: \"id\",\n  };\n  // 菜单配置\n  const menuProps = {\n    children: \"children\",\n    label: (data: MenuType) => {\n      return data.meta.title;\n    },\n    value: \"id\",\n  };\n  // 部门数据\n  const departmentList = ref();\n  // 角色数据\n  const roleList = ref();\n  // 菜单数据\n  const menuList = ref();\n\n  // 获取部门数据\n  const getDepartmentData = () => {\n    getDepartmentList().then((res) => {\n      departmentList.value = res.data.result;\n    });\n  };\n\n  // 获取角色数据\n  const getRoleData = () => {\n    getRoleList().then((res) => {\n      roleList.value = res.data.result;\n    });\n  };\n\n  // 获取菜单数据\n  const getMenuData = () => {\n    getMenuList().then((res) => {\n      menuList.value = res.data.result;\n    });\n  };\n\n  return {\n    departmentProps,\n    menuProps,\n    departmentList,\n    roleList,\n    menuList,\n    getDepartmentData,\n    getRoleData,\n    getMenuData,\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, isRef as _isRef, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"custom-dialog-body scroll-bar-hidden\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"取消\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"确定\")\n\nimport { computed, nextTick, onMounted, ref, watch } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nimport useSystem from \"@/hooks/web/useSystem\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PermissionsModal',\n  props: {\n    modalVisible: { type: Boolean },\n    modalData: null\n  },\n  emits: [\"toggleVisible\"],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\n  modalVisible: boolean;\n  modalData?: Array<number>;\n}\n\nconst { menuProps, menuList, getMenuData } = useSystem();\n\n\n\nconst treeRef = ref();\n\n// 模块显示/隐藏\n\nconst visible = computed({\n  get() {\n    return props.modalVisible;\n  },\n  set() {\n    cancel();\n  },\n});\n\nwatch(\n  () => props.modalData,\n  (newVal) => {\n    nextTick(() => {\n      treeRef.value.setCheckedKeys(newVal, false);\n    });\n  }\n);\n\nonMounted(() => {\n  getMenuData();\n});\n\n// 取消\nconst cancel = () => {\n  emit(\"toggleVisible\", false);\n};\n\n// 确定\nconst confirm = () => {\n  treeRef.value.getCheckedKeys(false);\n  ElMessage.success(\"菜单权限配置成功！\");\n  emit(\"toggleVisible\", false);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_tree = _resolveComponent(\"el-tree\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: _unref(visible),\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => (_isRef(visible) ? (visible).value = $event : null)),\n    title: \"菜单权限\",\n    width: \"38%\",\n    draggable: \"\",\n    \"close-on-click-modal\": false,\n    \"close-on-press-escape\": false,\n    class: \"custom-dialog\"\n  }, {\n    footer: _withCtx(() => [\n      _createVNode(_component_el_button, {\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (cancel()))\n      }, {\n        default: _withCtx(() => [\n          _hoisted_2\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_button, {\n        onClick: _cache[1] || (_cache[1] = ($event: any) => (confirm())),\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [\n          _hoisted_3\n        ]),\n        _: 1\n      })\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_el_tree, {\n          ref_key: \"treeRef\",\n          ref: treeRef,\n          data: _unref(menuList),\n          props: _unref(menuProps),\n          \"node-key\": \"id\",\n          \"show-checkbox\": \"\",\n          \"default-expand-all\": \"\"\n        }, null, 8, [\"data\", \"props\"])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","import script from \"./PermissionsModal.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./PermissionsModal.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["departmentProps","children","label","value","menuProps","data","meta","title","departmentList","ref","roleList","menuList","getDepartmentData","getDepartmentList","then","res","result","getRoleData","getRoleList","getMenuData","getMenuList","_hoisted_1","class","_hoisted_2","_createTextVNode","_hoisted_3","_defineComponent","__name","props","modalVisible","type","Boolean","modalData","emits","setup","__props","emit","useSystem","treeRef","visible","computed","get","set","cancel","watch","newVal","nextTick","setCheckedKeys","onMounted","confirm","getCheckedKeys","ElMessage","_ctx","_cache","_component_el_tree","_resolveComponent","_component_el_button","_component_el_dialog","_openBlock","_createBlock","modelValue","_unref","$event","_isRef","width","draggable","footer","_withCtx","_createVNode","onClick","default","_","_createElementVNode","ref_key","__exports__"],"sourceRoot":""}